\chapter{Problem Formalization}


\section{Input Data}

\subsubsection{Notes}
\begin{itemize}
    \item The geographical information will be loaded in the form of a map, obtained in OpenStreetMap and converted to a graph
    \item The words 'street', 'road' and 'way' are used interchangeably
\end{itemize}

\subsubsection{Graph}
\paragraph{G = (N, E)} - weighted directed (roads may be one way only) graph that represents the map. It is composed by Nodes and Edges
\begin{itemize}

	\item N - set of Nodes (a node represents an \uline{\textit{interest point}} or simply a point in the road network) (N(i) is the ith element). For each node:
\begin{itemize}
	\item Adj - edges whose origin is N(i)
	\item lat - the latitude of the point it represents in the map
	\item long - the longitude of the point it represents in the map
\end{itemize}

	\item A - set of Edges (an edge represents a way/street/road) (E(i) is the ith element). For each edge:
\begin{itemize}
	\item w - weight (represents the length of the way) (measured in meters)
	\item dest - origin node of the edge
	\item orig - destination node of the edge
\end{itemize}

\end{itemize}

\uline{Interest Points} (special nodes)
\begin{itemize}
	\item base - base/garage of the company
	\item rp - recharge points
	\item pup - pick up point
	\item dp - delivery point
\end{itemize}

\subsubsection{Vehicles}
\paragraph{V} - set of vehicles that make the fleet of the company (Ve(i) is the ith element). For each vehicle:
\begin{itemize}
	\item range - current range of the vehicle (in kilometers)
\end{itemize}

\subsubsection{Orders}
\paragraph{O} - set of orders for the day (O(i) is the ith element). For each order:
\begin{itemize}
    \item pup - pick up point
	\item dp - delivery point
\end{itemize}


\section{Output Data}
Each vehicle is assigned a \textit{path} that represents the best sequence of nodes for the orders \textit{Ov} he's been assigned to. The path and orders are distributed taking to account the optimization of the distance travelled and the range of each vehicle at any given time.
For each Vehicle V(i):
\begin{itemize}
	\item path - sequence of nodes that represents the path to be taken by a vehicle on a day (path(i) is the ith element)
	\item Ov - set of orders assigned to the vehicle (OrV(i) is the ith element)
\end{itemize}


\section{Restrictions}

\subsection{Input Restrictions}
\subsubsection{General}
\begin{itemize}
    \item The sets' indexes are implicitly limited by their sizes and 0\\ \uline{Example:}
    $ 0 \leq i < |N| $
\end{itemize}

\subsubsection{Graph}
\begin{itemize}
    \item Node
    \begin{itemize}
        \item $ |N| > 0 $ 
        \item $ \forall n \in N, Adj(n) \subseteq E $ (Adj is the set of edges originated in N(i))
        \item $ \forall n \in N, \ang{0} \leq lat \leq \ang{360} $
        \item $ \forall n \in N, \ang{0} \leq long \leq \ang{360} $
    \end{itemize}   
    
    \item{Edge}
    \begin{itemize}
        \item $ |E| > 0 $
        \item $ \forall e \in E, w > 0 $ (the length of a way or road must be always bigger than 0)
        \item $ \forall e \in E, orig \in N $ 
        \item $ \forall e \in E, dest \in N $
    \end{itemize}
    
    \item $ base \in N $
    \item $ rp \in N $
    \item $ pup \in N $
    \item $ dp \in N $
    \item $ \exists! n \in N, n = base $
    
\end{itemize}

\subsubsection{Vehicles}
\begin{itemize}
    \item $ |V| > 0 $
    \item $ \forall v \in V, range > 0 $
\end{itemize}

\subsubsection{Orders}
\begin{itemize}
    \item $ |O| \geq 0 $
    \item $ \forall o \in O, pup \in N $
    \item $ \forall o \in O, dp \in N $
\end{itemize}


\subsection{Output Restrictions}

\subsubsection{Path}
\begin{itemize}
    \item $ |path| > 0 $
    \item $ path \subseteq N $
    \item $ \forall p \in path, p \in N $
\end{itemize}

\subsubsection{Vehicle Orders}
\begin{itemize}
    \item $ |Ov| \geq 0 $
    \item $ Ov \subseteq O $
    \item $ \forall o \in Ov, o \in O$
\end{itemize}


\section{Objective Function}

The company's goal for this system is to optimize the use of their vehicles, which means reducing the time it takes to fulfill all orders. Being $ f $ the function that represents the time on the road by all vehicles, the objective is to minimize it:
\[ f = \sum_{i=0}^n t_i \]
\begin{itemize}
    \item $ t_i $ being the time spent travelling by a vehicle in a day (for all its orders)
    \item $ n $ being the number of vehicles in the company's fleet
\end{itemize}
